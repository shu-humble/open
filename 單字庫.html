<!DOCTYPE html>
<html lang="UTF-8">
<head>
  <meta charset="UTF-8">
  <title>單字管理後台</title>
</head>
<body>
  <h1>單字管理後台</h1>

  <div>
    <input id="wordInput" type="text" placeholder="英文單字">
    <input id="translationInput" type="text" placeholder="中文翻譯">
    <button onclick="addWord()">新增單字</button>
  </div>

  <hr>

  <div>
    <h2>批量匯入單字</h2>
    <textarea id="bulkInput" rows="10" cols="50" placeholder="一行一組，英文,中文。例如：Happy (adj.),開心的"></textarea><br>
    <button onclick="bulkImport()">批量匯入</button>
  </div>

  <hr>

  <h2>現有單字</h2>
  <ul id="wordList"></ul>

  <button onclick="saveWords()">💾儲存到 LocalStorage</button>
  <button onclick="clearAllWords()" style="background-color:red; color:white;">❌一鍵刪除所有單字</button>

  <script>
    let words = JSON.parse(localStorage.getItem('words')) || [];

    function renderWords() {
      const wordList = document.getElementById('wordList');
      wordList.innerHTML = '';
      words.forEach((item, index) => {
        const li = document.createElement('li');
        li.textContent = `${item.word} - ${item.translation}`;
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = '刪除';
        deleteBtn.onclick = () => {
          words.splice(index, 1);
          renderWords();
        };
        li.appendChild(deleteBtn);
        wordList.appendChild(li);
      });
    }

    function addWord() {
      const word = document.getElementById('wordInput').value.trim();
      const translation = document.getElementById('translationInput').value.trim();
      if (word && translation) {
        words.push({ word, translation });
        document.getElementById('wordInput').value = '';
        document.getElementById('translationInput').value = '';
        renderWords();
      } else {
        alert('請輸入英文和中文');
      }
    }

    function bulkImport() {
      const inputText = document.getElementById('bulkInput').value.trim();
      if (!inputText) {
        alert('請貼上要匯入的單字');
        return;
      }
      const lines = inputText.split('\n');
      for (const line of lines) {
        const [word, translation] = line.split(',').map(s => s.trim());
        if (word && translation) {
          words.push({ word, translation });
        }
      }
      document.getElementById('bulkInput').value = '';
      renderWords();
      alert('批量匯入完成！');
    }

    function saveWords() {
      localStorage.setItem('words', JSON.stringify(words));
      alert('儲存成功！');
    }

    function clearAllWords() {
      if (confirm('確定要刪除所有單字嗎？這個動作無法復原！')) {
        words = [];
        localStorage.removeItem('words');
        renderWords();
        alert('已清空所有單字！');
      }
    }

    renderWords();
  </script>
</body>
</html>
