<!DOCTYPE html>
<html lang="UTF-8">
<head>
  <meta charset="UTF-8">
  <title>å–®å­—ç®¡ç†å¾Œå°</title>
  <style>
  body {
   font-family: Arial, sans-serif; /* è¨­å®šé è¨­å­—å‹ç‚º Arialï¼Œæ‰¾ä¸åˆ°æ™‚å†ç”¨ç³»çµ±å…§çš„ sans-serif é¡å­—å‹ */
   /*  max-width: 1200px;             è¨­å®šå…§å®¹æœ€å¤§å¯¬åº¦ç‚º 1200pxï¼Œé¿å…å¤ªå¤§è¢å¹•æ™‚å…§å®¹éåº¦å»¶å±• */
    margin: 0px 10px 10px 10px;              /* é ‚éƒ¨ å³é‚Š åº•éƒ¨ å·¦é‚Š;ï¼ˆé †æ™‚é‡é †åºï¼‰ */
  }


    .container {
      display: flex;
      gap: 10px; /*é–“è·*/
    }
    .left-panel {/*å·¦é‚Šçš„è¨­å®š*/
      flex: 1;
    }
    .right-panel {/*å³é‚Šçš„å–®å­—åº«*/
      flex: 1; /*ä½”æ“š1ä»½*/
      position: sticky; /*å›ºå®š*/
      margin-top: -5.0em; /* å°‡æ¨™é¡Œå¾€ä¸Šç§»å‹• 1.5emï¼Œè¦–æƒ…æ³èª¿æ•´ */
      align-self: flex-start; /*é ä¸Š*/
    }
    .word-list {
      max-height: 70vh;
      overflow-y: auto;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 5px;
    }
    .word-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px;/*å–®å­—çš„padding*/
      border-bottom: 1px solid #eee;/*å–®å­—ä¸‹æ–¹çš„é‚Šæ¡†*/  
    }
    .word-item:last-child {
      border-bottom: none;
    }
    .save-buttons {
      margin: 20px 0;
      padding: 10px;
      background: #f5f5f5;
      border-radius: 5px;
    }
    .save-buttons button {
      margin-right: 10px;
    }
    input[type="text"], input[type="number"] {
      padding: 5px;
      margin: 5px 0;
      width: 200px;
    }
    textarea {
      width: 100%;
      margin: 5px 0;
    }
    button {
      padding: 5px 10px;/*æŒ‰éˆ•çš„padding*/
      cursor: pointer;/*æ»‘é¼ ç§»å‹•åˆ°æŒ‰éˆ•ä¸Šæ™‚ï¼Œè®Šæˆæ‰‹å‹*/
    }
    .danger-button {
      background-color: red;/*ç´…è‰²*/
      color: white;/*ç™½è‰²*/
      border: none; /*æ²’æœ‰é‚Šæ¡†*/
      padding: 5px 10px; /*æŒ‰éˆ•çš„padding*/
      border-radius: 3px;/*åœ“è§’*/
    }
  </style>
</head>
<body>
  <h1>å–®å­—ç®¡ç†å¾Œå°</h1>
  <p id="saveReminder"></p>  <button id="langToggleBtn" onclick="toggleLanguage()">ğŸŒ åˆ‡æ›èªè¨€</button>
  <div class="container">



    <div class="left-panel">
      <div>
        <input id="wordInput" type="text" placeholder="è‹±æ–‡å–®å­—">
        <input id="translationInput" type="text" placeholder="ä¸­æ–‡ç¿»è­¯">
        <button onclick="addWord()">æ–°å¢å–®å­—</button>
      </div>

      <hr>

      <div>
        <h2>æ‰¹é‡åŒ¯å…¥å–®å­—</h2>
        <textarea id="bulkInput" rows="10" cols="50" placeholder="ä¸€è¡Œä¸€çµ„ï¼Œè‹±æ–‡,ä¸­æ–‡ã€‚ä¾‹å¦‚ï¼šHappy (adj.),é–‹å¿ƒçš„"></textarea><br>
        <button onclick="bulkImport()">æ‰¹é‡åŒ¯å…¥</button>
      </div>

      <hr>

      <div>
        <h2>éŠæˆ²è¨­å®š</h2>
        <label for="wordsPerRound">æ¯å±€å–®å­—æ•¸é‡ï¼š</label>
        <input type="number" id="wordsPerRound" min="1" value="10">
      </div>

      <div class="save-buttons">
        <button onclick="saveAll()">ğŸ’¾å„²å­˜æ‰€æœ‰è¨­å®š</button>
        <button class="danger-button" onclick="clearAllWords()">âŒä¸€éµåˆªé™¤æ‰€æœ‰å–®å­—</button>
      </div>

    </div>

    <div class="right-panel">
      <h2>ç¾æœ‰å–®å­—</h2>
      <div class="word-list" id="wordList"></div>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    let currentLanguage = urlParams.get('lang') || 'zh';
  
    let words = JSON.parse(localStorage.getItem('words')) || [];
    let settings = JSON.parse(localStorage.getItem('wordGameSettings')) || { wordsPerRound: 10 };

    // åˆå§‹åŒ–è®¾ç½®è¾“å…¥æ¡†
    document.getElementById('wordsPerRound').value = settings.wordsPerRound;

    function renderWords() {
      const wordList = document.getElementById('wordList');
      wordList.innerHTML = '';
      words.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'word-item';
        div.textContent = `${item.word} - ${item.translation}`;
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = translations[currentLanguage].delete;
        deleteBtn.onclick = () => {
          words.splice(index, 1);
          renderWords();
        };
        div.appendChild(deleteBtn);
        wordList.appendChild(div);
      });
    }

    function addWord() {
  const word = document.getElementById('wordInput').value.trim();
  const translation = document.getElementById('translationInput').value.trim();
  const t = translations[currentLanguage];
  if (word && translation) {
    words.push({ word, translation });
    document.getElementById('wordInput').value = '';
    document.getElementById('translationInput').value = '';
    renderWords();
  } else {
    alert(t.alertInputRequired);
  }
}

function bulkImport() {
  const t = translations[currentLanguage];
  const inputText = document.getElementById('bulkInput').value.trim();
  if (!inputText) {
    alert(t.alertPasteRequired);
    return;
  }
  const lines = inputText.split('\n');
  for (const line of lines) {
    const [word, translation] = line.split(',').map(s => s.trim());
    if (word && translation) {
      words.push({ word, translation });
    }
  }
  document.getElementById('bulkInput').value = '';
  renderWords();
  alert(t.alertImportDone);
}

function saveWords() {

  const wordsPerRound = parseInt(document.getElementById('wordsPerRound').value);
    if (wordsPerRound < 1) {//å¦‚æœæ¯å±€å–®å­—æ•¸<1æœƒæè·³å‡ºå¤±æ•—
        alert(translations[currentLanguage].alertInvalidNumber);
        return;
    }

  const t = translations[currentLanguage];
  localStorage.setItem('words', JSON.stringify(words));
  alert(t.alertSaveDone);

}

function clearAllWords() {
  const t = translations[currentLanguage];
  if (confirm(t.confirmDeleteAll)) {
    words = [];
    localStorage.removeItem('words');
    renderWords();
    alert(t.alertDeleteAllDone);
  }
}



function saveAll() {
  saveWords();
  saveSettings();
}

    const translations = {
  zh: {
    title: 'å–®å­—ç®¡ç†å¾Œå°',
    addWord: 'æ–°å¢å–®å­—',
    placeholderWord: 'è‹±æ–‡å–®å­—',
    placeholderTranslation: 'æ„æ€æˆ–ç¿»è­¯',
    bulkTitle: 'æ‰¹é‡åŒ¯å…¥å–®å­—',
    bulkPlaceholder: 'ä¸€è¡Œä¸€çµ„ï¼Œè‹±æ–‡,ä¸­æ–‡ã€‚ä¾‹å¦‚ï¼šHappy (adj.),é–‹å¿ƒçš„',
    bulkImport: 'æ‰¹é‡åŒ¯å…¥',
    save: 'ğŸ’¾å„²å­˜åˆ° LocalStorage',
    clear: 'âŒä¸€éµåˆªé™¤æ‰€æœ‰å–®å­—',
    wordListTitle: 'ç¾æœ‰å–®å­—',
    delete: 'åˆªé™¤',
    reminder: 'è¨˜å¾—é»æ“Šã€ğŸ’¾å„²å­˜åˆ° LocalStorageã€‘å„²å­˜æ‚¨è¨­å®šçš„æ–‡å­—',
    alertInputRequired: 'è«‹è¼¸å…¥è‹±æ–‡å’Œä¸­æ–‡',
    alertPasteRequired: 'è«‹è²¼ä¸Šè¦åŒ¯å…¥çš„å–®å­—',
    alertImportDone: 'æ‰¹é‡åŒ¯å…¥å®Œæˆï¼',
    alertSaveDone: 'å„²å­˜æˆåŠŸï¼',
    confirmDeleteAll: 'ç¢ºå®šè¦åˆªé™¤æ‰€æœ‰å–®å­—å—ï¼Ÿé€™å€‹å‹•ä½œç„¡æ³•å¾©åŸï¼',
    alertDeleteAllDone: 'å·²æ¸…ç©ºæ‰€æœ‰å–®å­—ï¼',
    settingsTitle: 'éŠæˆ²è¨­å®š',
    wordsPerRound: 'æ¯å±€å–®å­—æ•¸é‡ï¼š',
    alertInvalidNumber: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„æ•¸å­—ï¼',


  },
  en: {
    title: 'Word Management',
    addWord: 'Add Word',
    placeholderWord: 'English Word',
    placeholderTranslation: 'Meaning or translation',
    bulkTitle: 'Bulk Import Words',
    bulkPlaceholder: 'One line per pair, e.g.: Happy (adj.),Feeling good',
    bulkImport: 'Bulk Import',
    save: 'ğŸ’¾ Save to LocalStorage',
    clear: 'âŒ Delete All Words',
    wordListTitle: 'Current Words',
    delete: 'Delete',
    reminder: 'Remember to click ã€ğŸ’¾ Save to LocalStorageã€‘ to save your words',
    alertInputRequired: 'Please enter both English and Chinese.',
    alertPasteRequired: 'Please paste the words to import.',
    alertImportDone: 'Bulk import completed!',
    alertSaveDone: 'Saved successfully!',
    confirmDeleteAll: 'Are you sure you want to delete all words? This cannot be undone!',
    alertDeleteAllDone: 'All words have been cleared!',
    settingsTitle: 'Game Settings',
    wordsPerRound: 'Words per round:',
    alertInvalidNumber: 'Please enter a valid number!',


  }
  
};


function toggleLanguage() {
  currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
  updateLanguage();


}


function updateLanguage() {
  const t = translations[currentLanguage];
  document.title = t.title;
  document.querySelector('h1').textContent = t.title;
  document.querySelector('button[onclick="addWord()"]').textContent = t.addWord;
  document.getElementById('wordInput').placeholder = t.placeholderWord;
  document.getElementById('translationInput').placeholder = t.placeholderTranslation;
  document.querySelectorAll('h2')[0].textContent = t.bulkTitle;
  document.getElementById('bulkInput').placeholder = t.bulkPlaceholder;
  document.querySelector('button[onclick="bulkImport()"]').textContent = t.bulkImport;
  document.querySelector('button[onclick="saveAll()"]').textContent = t.save;
  document.querySelector('button[onclick="clearAllWords()"]').textContent = t.clear;
  document.querySelectorAll('h2')[1].textContent = t.settingsTitle;
  document.querySelectorAll('h2')[2].textContent = t.wordListTitle;
  document.getElementById('saveReminder').textContent = t.reminder;
  document.getElementById('langToggleBtn').textContent = 'ğŸŒ ' + (currentLanguage === 'zh' ? 'English' : 'ä¸­æ–‡');
  document.querySelector('label[for="wordsPerRound"]').textContent = t.wordsPerRound;


  renderWords();
}

function openWordBank() {
  window.open(`å–®å­—åº«.html?lang=${currentLanguage}`, '_blank');
}

updateLanguage();
</script>
</body>
</html>
